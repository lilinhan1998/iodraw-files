{"type":"wb","version":2,"source":"https://www.iodraw.com","elements":[{"type":"rectangle","version":194,"versionNonce":2061943634,"isDeleted":false,"id":"p6I1dKxZc41NF16kjM-CR","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":646,"y":133,"strokeColor":"#000000","backgroundColor":"transparent","width":391,"height":100,"seed":1778054514,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"type":"text","id":"-6xBTOsmF43_yNgONn7ty"}],"updated":1746605147944,"link":null},{"type":"text","version":145,"versionNonce":509039310,"isDeleted":false,"id":"-6xBTOsmF43_yNgONn7ty","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":651,"y":138,"strokeColor":"#000000","backgroundColor":"transparent","width":381,"height":90,"seed":1456679790,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1746605147944,"link":null,"fontSize":20,"fontFamily":1,"text":"bt_navigator.cpp\nBtNavigator类，继承了生命周期节点，\n用来加载行为树导航服务器","baseline":80,"textAlign":"center","verticalAlign":"middle","containerId":"p6I1dKxZc41NF16kjM-CR","originalText":"bt_navigator.cpp\nBtNavigator类，继承了生命周期节点，用来加载行为树导航服务器"},{"type":"rectangle","version":189,"versionNonce":328632594,"isDeleted":false,"id":"YEvd2qFJJzELeXmrjEIcM","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":872,"y":311,"strokeColor":"#000000","backgroundColor":"transparent","width":420,"height":160,"seed":1627521006,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"type":"text","id":"SM8pKQok9O42vIkjwZZ_q"},{"id":"r8kZs1dzNBJZNKA5dMFC1","type":"arrow"},{"id":"6cHA1sRoRDoEY1Bz77h5Y","type":"arrow"}],"updated":1746605147944,"link":null},{"type":"text","version":200,"versionNonce":2109720846,"isDeleted":false,"id":"SM8pKQok9O42vIkjwZZ_q","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":877,"y":331,"strokeColor":"#000000","backgroundColor":"transparent","width":410,"height":120,"seed":1190579250,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1746605147944,"link":null,"fontSize":20,"fontFamily":1,"text":"navigate_to_pose.cpp\nNavigatorToPoseNavigator类\n派生类实现navigate_to_pose客户端，并订\n阅目标点（回调函数中客户端直接发送目标）","baseline":110,"textAlign":"center","verticalAlign":"middle","containerId":"YEvd2qFJJzELeXmrjEIcM","originalText":"navigate_to_pose.cpp\nNavigatorToPoseNavigator类\n派生类实现navigate_to_pose客户端，并订阅目标点（回调函数中客户端直接发送目标）"},{"type":"rectangle","version":93,"versionNonce":365401810,"isDeleted":false,"id":"TTlj6wFpPfqYnHa-54nyO","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":343,"y":324,"strokeColor":"#000000","backgroundColor":"transparent","width":390,"height":130,"seed":1956593842,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"type":"text","id":"JX0WBLNsg75m39Vjig0S8"},{"id":"r8kZs1dzNBJZNKA5dMFC1","type":"arrow"},{"id":"6cHA1sRoRDoEY1Bz77h5Y","type":"arrow"},{"id":"27ey-GzK0x0hS9NXtRdVr","type":"arrow"}],"updated":1746605147944,"link":null},{"type":"text","version":64,"versionNonce":1027569486,"isDeleted":false,"id":"JX0WBLNsg75m39Vjig0S8","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":348,"y":329,"strokeColor":"#000000","backgroundColor":"transparent","width":380,"height":120,"seed":1765106098,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1746605147944,"link":null,"fontSize":20,"fontFamily":1,"text":"navigator.hpp\nNavigator类，实例化一个行为树action服\n务器\nBtActionServer","baseline":110,"textAlign":"center","verticalAlign":"middle","containerId":"TTlj6wFpPfqYnHa-54nyO","originalText":"navigator.hpp\nNavigator类，实例化一个行为树action服务器\nBtActionServer"},{"type":"arrow","version":260,"versionNonce":1376840850,"isDeleted":false,"id":"6cHA1sRoRDoEY1Bz77h5Y","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":867,"y":392.0901314215884,"strokeColor":"#000000","backgroundColor":"transparent","width":129,"height":3.552468949756701,"seed":1568222318,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1746605147944,"link":null,"startBinding":{"elementId":"YEvd2qFJJzELeXmrjEIcM","focus":0.056312382992136416,"gap":5},"endBinding":{"elementId":"TTlj6wFpPfqYnHa-54nyO","focus":0.2819683239163023,"gap":5},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[-129,3.552468949756701]]},{"type":"rectangle","version":107,"versionNonce":1160732046,"isDeleted":false,"id":"srzPkGJwmXR2A9qq2P01Y","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":744,"y":326,"strokeColor":"#000000","backgroundColor":"transparent","width":113,"height":43,"seed":591722542,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"type":"text","id":"CavcBu6aToCWcL6oLiIA4"}],"updated":1746605147944,"link":null},{"type":"text","version":72,"versionNonce":1848216146,"isDeleted":false,"id":"CavcBu6aToCWcL6oLiIA4","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":749,"y":332.5,"strokeColor":"#000000","backgroundColor":"transparent","width":103,"height":30,"seed":893149614,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1746605147944,"link":null,"fontSize":20,"fontFamily":1,"text":"继承关系","baseline":20,"textAlign":"center","verticalAlign":"middle","containerId":"srzPkGJwmXR2A9qq2P01Y","originalText":"继承关系"},{"type":"rectangle","version":173,"versionNonce":180911054,"isDeleted":false,"id":"aW47j8efQW4Ghx1tjj3jI","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":338,"y":527,"strokeColor":"#000000","backgroundColor":"transparent","width":488,"height":190,"seed":1544942386,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"type":"text","id":"sa-g0v980QwmOvJ77LMlN"},{"id":"27ey-GzK0x0hS9NXtRdVr","type":"arrow"},{"id":"3lw90O7h3MYgsNFbwK3GA","type":"arrow"}],"updated":1746605147944,"link":null},{"type":"text","version":214,"versionNonce":1088974866,"isDeleted":false,"id":"sa-g0v980QwmOvJ77LMlN","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":343,"y":547,"strokeColor":"#000000","backgroundColor":"transparent","width":478,"height":150,"seed":418879790,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1746605147944,"link":null,"fontSize":20,"fontFamily":1,"text":"bt_action_server_impl.hpp\nBtActionServer类，实现行为树action服务端，使用\nBehaviorTreeEngine加载行为树节点库，创建blackbo\nard，拿到行为树节点后，创建行为树，服务端收到响\n应后开始执行行为树tick函数","baseline":140,"textAlign":"center","verticalAlign":"middle","containerId":"aW47j8efQW4Ghx1tjj3jI","originalText":"bt_action_server_impl.hpp\nBtActionServer类，实现行为树action服务端，使用BehaviorTreeEngine加载行为树节点库，创建blackboard，拿到行为树节点后，创建行为树，服务端收到响应后开始执行行为树tick函数"},{"type":"arrow","version":240,"versionNonce":1948504590,"isDeleted":false,"id":"27ey-GzK0x0hS9NXtRdVr","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":3.19699558604402,"x":527.1343172029622,"y":455,"strokeColor":"#000000","backgroundColor":"transparent","width":5.271885949411285,"height":71,"seed":2146506734,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1746605147944,"link":null,"startBinding":null,"endBinding":{"elementId":"TTlj6wFpPfqYnHa-54nyO","focus":0.05288585184442305,"gap":2.2716156962888476},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[5.271885949411285,71]]},{"type":"rectangle","version":78,"versionNonce":776248786,"isDeleted":false,"id":"nkmJPximmhezywQ-Vo1Zp","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":894,"y":547,"strokeColor":"#000000","backgroundColor":"transparent","width":417,"height":141,"seed":58438450,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"type":"text","id":"hJEC6_1o6RNtQboikh-9m"},{"id":"3lw90O7h3MYgsNFbwK3GA","type":"arrow"}],"updated":1746605147944,"link":null},{"type":"text","version":56,"versionNonce":1010458702,"isDeleted":false,"id":"hJEC6_1o6RNtQboikh-9m","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":899,"y":572.5,"strokeColor":"#000000","backgroundColor":"transparent","width":407,"height":90,"seed":622412846,"groupIds":[],"strokeSharpness":"sharp","boundElements":[],"updated":1746605147944,"link":null,"fontSize":20,"fontFamily":1,"text":"behavior_tree_eigen.cpp\nBehaviorTreeEngine类，除开加载行为树及\n其节点，还实现了整棵树的执行、暂停","baseline":80,"textAlign":"center","verticalAlign":"middle","containerId":"nkmJPximmhezywQ-Vo1Zp","originalText":"behavior_tree_eigen.cpp\nBehaviorTreeEngine类，除开加载行为树及其节点，还实现了整棵树的执行、暂停"},{"type":"arrow","version":235,"versionNonce":55907218,"isDeleted":false,"id":"3lw90O7h3MYgsNFbwK3GA","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":3.1536879575104884,"x":827,"y":624,"strokeColor":"#000000","backgroundColor":"transparent","width":63,"height":3,"seed":784863090,"groupIds":[],"strokeSharpness":"round","boundElements":[],"updated":1746605147944,"link":null,"startBinding":{"elementId":"nkmJPximmhezywQ-Vo1Zp","focus":0.04452742481247283,"gap":4.092660824402174},"endBinding":{"elementId":"aW47j8efQW4Ghx1tjj3jI","focus":0.10139010763517654,"gap":1},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[63,-3]]},{"type":"rectangle","version":87,"versionNonce":1457858190,"isDeleted":false,"id":"K6SAeJAaMzA4qxNQrT-j3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":277,"y":91,"strokeColor":"#000000","backgroundColor":"transparent","width":1103,"height":656,"seed":1388185906,"groupIds":[],"strokeSharpness":"sharp","boundElements":[{"id":"L_9QGKvTQ-5g4IBCYOe1E","type":"arrow"}],"updated":1746605147944,"link":null},{"id":"NnaqkL39sred4aBoM450V","type":"rectangle","x":282.16666666666686,"y":769.6388888888888,"width":808,"height":169,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"sharp","seed":964043410,"version":308,"versionNonce":1381028178,"isDeleted":false,"boundElements":[{"type":"text","id":"8wZ7SvT7leX9mLhni26qh"},{"id":"y6KMfrIdWZLYCbfAK7EFC","type":"arrow"}],"updated":1746605147944,"link":null},{"id":"8wZ7SvT7leX9mLhni26qh","type":"text","x":287.16666666666686,"y":774.6388888888888,"width":798,"height":150,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"sharp","seed":660032782,"version":400,"versionNonce":1423779022,"isDeleted":false,"boundElements":null,"updated":1746605147944,"link":null,"text":"将导航器和行为树引擎耦合在一起，具体的功能实现在两个模块中有所体现：\n1、导航器中，实现了在on_goal_received_callback_、on_loop_callback_、on_pree\nmpt_callback_、on_completion_callback_回调函数，对不同阶段的导航器的状态做出\n决策；\n2、行为树引擎中，实现了对行为树执行、暂停等功能的封装，供BtActionServer使用。","fontSize":20,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":140,"containerId":"NnaqkL39sred4aBoM450V","originalText":"将导航器和行为树引擎耦合在一起，具体的功能实现在两个模块中有所体现：\n1、导航器中，实现了在on_goal_received_callback_、on_loop_callback_、on_preempt_callback_、on_completion_callback_回调函数，对不同阶段的导航器的状态做出决策；\n2、行为树引擎中，实现了对行为树执行、暂停等功能的封装，供BtActionServer使用。"},{"id":"L_9QGKvTQ-5g4IBCYOe1E","type":"arrow","x":565.5000000000001,"y":712.9722222222223,"width":0,"height":57.777777777777715,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":384343374,"version":30,"versionNonce":1317984018,"isDeleted":false,"boundElements":null,"updated":1746605147944,"link":null,"points":[[0,0],[0,57.777777777777715]],"lastCommittedPoint":null,"startBinding":null,"endBinding":{"elementId":"K6SAeJAaMzA4qxNQrT-j3","focus":-0.4768812330009064,"gap":23.75},"startArrowhead":null,"endArrowhead":"arrow"},{"id":"bnfsEItuWWriNqulItXZN","type":"rectangle","x":-331.1666666666664,"y":492.9722222222222,"width":557.7777777777777,"height":243.33333333333337,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"sharp","seed":1745086350,"version":74,"versionNonce":1203460878,"isDeleted":false,"boundElements":null,"updated":1746605147944,"link":null},{"id":"EzJ-Zw8gD37UIsPVHNWbh","type":"text","x":-317.8333333333332,"y":503.9722222222222,"width":543,"height":224,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"sharp","seed":534767186,"version":116,"versionNonce":787378062,"isDeleted":false,"boundElements":[{"id":"UgSY2bpQG9fKOzW6ubCmN","type":"arrow"}],"updated":1746605147944,"link":null,"text":"导航服务器的执行流程\n1、检测目标是否收到；\n2、定义cancel的条件检查函数、循环的回调函数；\n3、将第二步的回调函数传入行为树中，同时行为树开始run，\n得到执行的结果；\n4、停止行为树所有节点的运行；\n5、根据第三步的执行结果，导航服务器执行不同的决策。","fontSize":20,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":216,"containerId":null,"originalText":"导航服务器的执行流程\n1、检测目标是否收到；\n2、定义cancel的条件检查函数、循环的回调函数；\n3、将第二步的回调函数传入行为树中，同时行为树开始run，\n得到执行的结果；\n4、停止行为树所有节点的运行；\n5、根据第三步的执行结果，导航服务器执行不同的决策。"},{"id":"y6KMfrIdWZLYCbfAK7EFC","type":"arrow","x":277.5961207776435,"y":808.4182798462609,"width":75.42945411097662,"height":115.44605762403876,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"round","seed":2031769422,"version":62,"versionNonce":1322601934,"isDeleted":false,"boundElements":null,"updated":1746605147944,"link":null,"points":[[0,0],[-75.42945411097662,-115.44605762403876]],"lastCommittedPoint":null,"startBinding":{"elementId":"NnaqkL39sred4aBoM450V","focus":-0.82467237664425,"gap":4.570545889023435},"endBinding":null,"startArrowhead":null,"endArrowhead":"arrow"},{"id":"zYnZn-1pI3AQNMwJfgWVj","type":"rectangle","x":1451.4722222222217,"y":96.72222222222229,"width":769,"height":309.99999999999994,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"sharp","seed":813610258,"version":114,"versionNonce":956467790,"isDeleted":false,"boundElements":null,"updated":1746606815044,"link":null},{"id":"08lYjvRYutDyx67IjrD6p","type":"text","x":1463.9722222222217,"y":112.72222222222229,"width":755,"height":224,"angle":0,"strokeColor":"#000000","backgroundColor":"transparent","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"strokeSharpness":"sharp","seed":626093710,"version":135,"versionNonce":542444498,"isDeleted":false,"boundElements":null,"updated":1746607372130,"link":null,"text":"1、on_goal_received_callback_，接收navigate_to_pose的goal，依靠服务器加\n载行为树，将goal中的目标点写入黑板；\n2、on_loop_callback_，从黑板中获取现在跟踪的路径，计算出剩余的距离和需要\n的时间，通过服务器发布出去；\n3、on_preempt_callback_，通过判断行为树是否发生改变，决定要不要执行抢断当\n前的目标点，行为树发生变化，则不进行抢断；\n4、on_completion_callback_","fontSize":20,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":216,"containerId":null,"originalText":"1、on_goal_received_callback_，接收navigate_to_pose的goal，依靠服务器加\n载行为树，将goal中的目标点写入黑板；\n2、on_loop_callback_，从黑板中获取现在跟踪的路径，计算出剩余的距离和需要\n的时间，通过服务器发布出去；\n3、on_preempt_callback_，通过判断行为树是否发生改变，决定要不要执行抢断当\n前的目标点，行为树发生变化，则不进行抢断；\n4、on_completion_callback_"}],"appState":{"theme":"light","currentChartType":"bar","currentItemBackgroundColor":"transparent","currentItemEndArrowhead":"arrow","currentItemFillStyle":"hachure","currentItemFontFamily":1,"currentItemFontSize":20,"currentItemLinearStrokeSharpness":"round","currentItemOpacity":100,"currentItemRoughness":1,"currentItemStartArrowhead":null,"currentItemStrokeColor":"#000000","currentItemStrokeSharpness":"sharp","currentItemStrokeStyle":"solid","currentItemStrokeWidth":1,"currentItemTextAlign":"left","cursorButton":"up","editingGroupId":null,"elementLocked":false,"elementType":"selection","exportBackground":true,"exportScale":1,"exportEmbedScene":false,"exportWithDarkMode":false,"gridSize":null,"lastPointerDownWith":"mouse","name":"行为树导航器实现架构","openMenu":null,"previousSelectedElementIds":{"08lYjvRYutDyx67IjrD6p":true,"mfbUCbSeBRAINqTJKjzL1":true},"scrolledOutside":false,"scrollX":-581.4722222222216,"scrollY":167.02777777777771,"selectedElementIds":{},"selectedGroupIds":{},"shouldCacheIgnoreZoom":false,"showStats":false,"viewBackgroundColor":"#ffffff","zenModeEnabled":false,"zoom":{"value":0.8}},"files":{}}